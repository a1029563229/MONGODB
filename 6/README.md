# 聚合

## 聚合框架概览
- 为调用聚合框架就要定义一个管道。聚合管道里的每一步输出都作为下一步的输入。每一步都在输入文档执行单个操作并生成输出文档。
- 聚合管道操作包含下面几个部分：
  - $project：指定输出文档里的字段（项目化）；
  - $match：选择要处理的文档，与 find() 类似；
  - $limit：限制传递给下一步的文档数量；
  - $skip：跳过一定数量的文档；
  - $unwind：扩展数组，为每个输入入口生成一个输出文档；
  - $group：根据 key 来分组文档；
  - $sort：排序文档；
  - $geoNear：根据某个地理位置附近的文档；
  - $out：把管道的结果写入某个集合；
  - $redact：控制特定数据的访问；